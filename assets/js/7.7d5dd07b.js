(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{189:function(e,a,t){"use strict";t.r(a);var r=t(0),s=Object(r.a)({},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"docker-拾遗"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-拾遗","aria-hidden":"true"}},[e._v("#")]),e._v(" Docker 拾遗")]),e._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),t("h2",{attrs:{id:"redhat安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redhat安装","aria-hidden":"true"}},[e._v("#")]),e._v(" redhat安装")]),e._v(" "),t("ul",[t("li",[e._v("https://linuxconfig.org/how-to-install-docker-in-rhel-8\n"),t("ul",[t("li",[e._v("yum install yum-utils")]),e._v(" "),t("li",[e._v("yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo")]),e._v(" "),t("li",[e._v("yum list docker-ce --showduplicates | sort -r")]),e._v(" "),t("li",[e._v("yum install docker-ce")]),e._v(" "),t("li",[e._v("systemctl enable --now docker")]),e._v(" "),t("li",[e._v("systemctl is-active docker && systemctl is-enabled docker")]),e._v(" "),t("li",[e._v('sudo curl -L "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose')]),e._v(" "),t("li",[e._v("sudo chmod +x /usr/local/bin/docker-compose")]),e._v(" "),t("li",[e._v("docker run --rm hello-world")])])])]),e._v(" "),t("h2",{attrs:{id:"其他安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#其他安装","aria-hidden":"true"}},[e._v("#")]),e._v(" 其他安装")]),e._v(" "),t("ul",[t("li",[e._v("curl -sSL https://get.docker.com | sh")])]),e._v(" "),t("h2",{attrs:{id:"中国安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#中国安装","aria-hidden":"true"}},[e._v("#")]),e._v(" 中国安装")]),e._v(" "),t("ul",[t("li",[e._v("curl -sSL https://get.daocloud.io/docker | sh")])]),e._v(" "),t("h2",{attrs:{id:"构建镜像从dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构建镜像从dockerfile","aria-hidden":"true"}},[e._v("#")]),e._v(" 构建镜像从Dockerfile")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker build . -f Dockerfile\ndocker-composer build .\n")])])]),t("h3",{attrs:{id:"build-with-arg"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-with-arg","aria-hidden":"true"}},[e._v("#")]),e._v(" build with arg")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("# https://stackoverflow.com/questions/43654656/dockerfile-if-else-condition-with-external-arguments/43656644\n# docker build -t my_docker .  --build-arg action=deploy\n# docker-compose build --build-arg action=deploy\n")])])]),t("h2",{attrs:{id:"删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 删除镜像")]),e._v(" "),t("blockquote",[t("p",[e._v("docker image rm -f vuepress\ndocker rmi $(docker images -q -f dangling=true)  #虚悬镜像(dangling image)")])]),e._v(" "),t("h2",{attrs:{id:"导出镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导出镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 导出镜像")]),e._v(" "),t("blockquote",[t("p",[e._v("docker image save vuepress:latest -o /tmp/vuepress.docker.image")])]),e._v(" "),t("h2",{attrs:{id:"导入镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#导入镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" 导入镜像")]),e._v(" "),t("blockquote",[t("p",[e._v("docker load < /tmp/vuepress.docker.image")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker import /tmp/vuepress.docker.image vuepress\ndocker import http://example.com/exampleimage.tgz example/imagerepo\n")])])]),t("h2",{attrs:{id:"pull-push镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pull-push镜像","aria-hidden":"true"}},[e._v("#")]),e._v(" pull/push镜像")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("docker login\n...\ndocker push vuepress-image\n")])])]),t("h2",{attrs:{id:"设置时区和host相同-https-serverfault-com-a-683651"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置时区和host相同-https-serverfault-com-a-683651","aria-hidden":"true"}},[e._v("#")]),e._v(" 设置时区和host相同 https://serverfault.com/a/683651")]),e._v(" "),t("h3",{attrs:{id:"docker-compose-yml方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml方式","aria-hidden":"true"}},[e._v("#")]),e._v(" docker-compose.yml方式")]),e._v(" "),t("blockquote",[t("p",[e._v("ubuntu 为host")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('volumes:\n  - "/etc/timezone:/etc/timezone:ro"\n  - "/etc/localtime:/etc/localtime:ro"\n')])])]),t("h3",{attrs:{id:"dockerfile方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile方式","aria-hidden":"true"}},[e._v("#")]),e._v(" Dockerfile方式")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ENV TZ=Asia/Shanghai\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone\n")])])]),t("p",[e._v("或 (适用于alpine)")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RUN apk add --no-cache tzdata\nENV TZ America/Los_Angeles\n")])])])])},[],!1,null,null,null);a.default=s.exports}}]);