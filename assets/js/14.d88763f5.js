(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{196:function(e,s,r){"use strict";r.r(s);var a=r(0),t=Object(a.a)({},function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"laravel-nova痛苦的经历"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#laravel-nova痛苦的经历","aria-hidden":"true"}},[e._v("#")]),e._v(" laravel Nova痛苦的经历")]),e._v(" "),r("blockquote",[r("p",[e._v("上线的项目不轻易敢改，除非出问题。")])]),e._v(" "),r("p",[e._v("终于，它出问题了， 购买的nova帐户license莫名消失，给官网发了N个邮件，等了2天还未解决，第4天早上才和客服邮件有正常的沟通！幸好之前有朋友借用，下载过离线包（赠人玫瑰）")]),e._v(" "),r("p",[e._v("苦苦等了2天，心想周二，就是人家米国的周一，该有人上班解决吧，结果不然，于是做了一个艰难的决定：用离线的方式来装，遇到一个问题，下载的版本是（2.x），对laravel要求为5.8，结果悲剧了！需要暴力升级！")]),e._v(" "),r("ul",[r("li",[e._v("把不兼容的包，先去掉，执行composer udpate升级laravel 5.8号，然后再composer reuqire 回来，著名的package都会支持最新的5.8了")]),e._v(" "),r("li",[e._v("把database中 $table->Increments('id'); 改为 $table->bigIncrements('id');\n"),r("ul",[r("li",[e._v('注意其他表对id的索引也需要改 如： unsignedBigInteger("user_id")')])])]),e._v(" "),r("li",[e._v("本来觉得应该可以了，可惜nova2的action_events数据表与1不兼容，导致无法修改item，只能暴力数据库迁移来更新action_events表")]),e._v(" "),r("li",[e._v("更多升级注意事项"),r("a",{attrs:{href:"https://laravel.com/docs/5.8/upgrade",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://laravel.com/docs/5.8/upgrade"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"暴力数据库迁移"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#暴力数据库迁移","aria-hidden":"true"}},[e._v("#")]),e._v(" 暴力数据库迁移")]),e._v(" "),r("ul",[r("li",[e._v("导出旧的数据表，不带结构，只有数据，然后重新执行：php artisan migrate:fresh")]),e._v(" "),r("li",[e._v("php artisan rinvex:publish:subscriptions")]),e._v(" "),r("li",[e._v("php artisan rinvex:publish:categories\n"),r("ul",[r("li",[e._v("php artisan rinvex:migrate:subscriptions")]),e._v(" "),r("li",[e._v("php artisan rinvex:migrate:categories")])])]),e._v(" "),r("li",[e._v("按顺序导入数据")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("source tags.sql;\nsource users.sql;\nsource point_transactions.sql;\nsource wechat_accounts.sql;\nsource albums.sql;\nsource ly_audios.sql;\nsource ly_metas.sql;\nsource ly_lts.sql;\nsource wechat_auto_replies.sql;\nsource album_subscriptions.sql;\nsource wechat_user_profiles.sql;\nsource posts.sql;\nsource wechat_pay_orders.sql;\nsource wechat_account_profiles.sql;\nsource categories.sql;\nsource wechat_messages.sql;\nsource gamps.sql;\nsource plans.sql;\n\nsource roles.sql;\nsource role_user.sql;\nsource role_permission.sql;\n")])])]),r("h2",{attrs:{id:"大bug"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#大bug","aria-hidden":"true"}},[e._v("#")]),e._v(" 大bug")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/barryvdh/laravel-debugbar/issues/480",target:"_blank",rel:"noopener noreferrer"}},[e._v("Class 'Barryvdh\\Debugbar\\ServiceProvider' not found"),r("OutboundLink")],1)])])])},[],!1,null,null,null);s.default=t.exports}}]);