#phpå­¦ä¹ ç¬”è®°

## phpå†å²

## phpåŸºæœ¬è¯­æ³•

## OOP é¢å‘å¯¹è±¡ç¼–ç¨‹ 

### ç±»ä¸å¯¹è±¡

1. ç±»æ˜¯æŠ½è±¡çš„ã€æ¦‚å¿µçš„ï¼Œä»£è¡¨ä¸€ç±»äº‹ç‰©
2. å¯¹è±¡æ˜¯å…·ä½“çš„ï¼Œå®é™…çš„ï¼Œä»£è¡¨ä¸€ä¸ªå…·ä½“äº‹ç‰©
3. ç±»æ˜¯å¯¹è±¡çš„æ¨¡ç‰ˆï¼Œå¯¹è±¡æ˜¯ç±»çš„ä¸€ä¸ªä¸ªå®ä¾‹ã€‚

#### å¦‚ä½•å®šä¹‰ä¸€ä¸ªç±»

``` 
class Cat{
	//å£°æ˜æˆå‘˜å±æ€§ ï¼ˆå˜é‡ï¼‰
	public $name; //å±æ€§å¿…éœ€è¦æœ‰è®¿é—®æ§åˆ¶ç¬¦
	protected $age;
	private $owner;
}
```

#### ç±»åè§„èŒƒ 

1. é¦–å­—æ¯å¤§å†™ï¼ˆ ä½†æ˜¯  $cat1 = new CAT(); //ç±»å ä¸åŒºåˆ†å¤§å°å†™ï¼‰
2. é©¼å³°å‘½å 
3. åè¯åœ¨å‰ 
4. åŠ¨è¯åœ¨å

#### å¦‚ä½•åˆ›å»ºå¯¹è±¡

```
$cat1 = new Cat;

$cat1 = new Cat();
```

#### æˆå‘˜å±æ€§/æˆå‘˜å˜é‡

â€‹	æ˜¯ç±»çš„ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ–ç¬¦åˆæ•°æ®ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰æˆ–èµ„æºæˆ–NULL

##### è®¿é—®æˆå‘˜å±æ€§

```
echo $cat1->name; //ä½¿ç”¨å¯¹è±¡è¿ç®—ç¬¦  ->
```

#####å¯¹è±¡è¿ç®—ç¬¦  ->

##### å¯¹è±¡ä¼ é€’æœºåˆ¶

```
	$cat1 = new Cat();
	$cat1->name = 'xiaohua';
	$cat2 = $cat1; //å€¼ä¼ é€’ï¼šä¼ é€’çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨referenceï¼Œå¯¹è±¡æ ‡è¯†ç¬¦
	$cat2 = 'abc'; //ä¸å½±å“$cat1
	
	$cat3 = &$cat1; //åœ°å€å¼•ç”¨
	$cat3 = 'def'; //æ­¤æ—¶æ”¹å˜äº†$cat1
	
```

#### æŸ¥çœ‹å¯¹è±¡æ ‡è¯†ç¬¦ #1

â€‹	var_dump($cat1);

#### æˆå‘˜å‡½æ•°/æˆå‘˜æ–¹æ³•

```
class Cat{
	//å£°æ˜æˆå‘˜å±æ€§ ï¼ˆå˜é‡ï¼‰
	public $name; //å±æ€§å¿…éœ€è¦æœ‰è®¿é—®æ§åˆ¶ç¬¦
	protected $age;
	
	public function cry(){
		echo 'miao';
	}
}
```

##### è°ƒç”¨æˆå‘˜å‡½æ•°

```
$cat1 = new Cat;
//cry();//ä¸å¯ä»¥ç›´æ¥è°ƒç”¨
$cat1->cry();
```

#### æ„é€ å‡½æ•°__construct

1. æ˜¯ç±»çš„ä¸€ä¸ªç‰¹æ®Šæ–¹æ³•
2. ä¸»è¦ä½œç”¨æ˜¯ åˆ›å»ºå¯¹è±¡æ—¶ ç›´æ¥**åˆå§‹åŒ–** èµ‹å€¼
3. æ²¡æœ‰è¿”å›å€¼
4. å®ä¾‹åŒ–å¯¹è±¡æ—¶ ç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨
5. æ„é€ å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ª
6. è€ç‰ˆæœ¬ï¼ˆphp4ä¸­ï¼‰æ„é€ å‡½æ•°å’Œç±»åç›¸åŒ (æ”¹ç±»åäº†æ€ä¹ˆåŠï¼Ÿ)ï¼Œå¦‚æœæœ‰2ä¸ªå½¢å¼çš„æ„é€ å‡½æ•°ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨__construct
7. å¦‚æœå®šä¹‰æ„é€ å‡½æ•°åï¼Œä¼šè¦†ç›–ç³»ç»Ÿé»˜è®¤çš„ç©ºæ„é€ å‡½æ•°
8. é»˜è®¤çš„æ„é€ å‡½æ•°æ–¹æ³•è®¿é—®ä¿®é¥°ç¬¦æ˜¯public

##### this å½“å‰å¯¹è±¡ï¼ˆè°ƒç”¨è€…ï¼‰

1. ç³»ç»Ÿä¼šç»™æ¯ä¸ªå¯¹è±¡åˆ†é…thisï¼Œä»£è¡¨å½“å‰å¯¹è±¡ï¼ˆè‡ªå·±çš„ï¼Œæˆ‘çš„ï¼‰
2. thisæ—¶å½“å‰çš„**æ‰§è¡Œç¯å¢ƒ** 
3. thisä¸èƒ½åœ¨ç±»å¤–éƒ¨ä½¿ç”¨

```
class Cat{
	public $name;
	public $age;
	
	public function __contruct($iname,$iage){
		//$name = $iname;
		var_dump($this);
		$this->name = $iname;
		$this->age = $iage;
	}

}

$cat1 = new Cat('xiaohua',3);
echo $cat1->name . $cat1->age;
```

#### ææ„å‡½æ•°__destruct

ä½œç”¨ï¼šé‡Šæ”¾ç›¸å…³èµ„æº

codeï¼š```function __destruct() { }```

å…ˆåˆ›å»ºçš„å¯¹è±¡åé”€æ¯ æ ˆ

###### è¯´æ˜

1. å½“æ²¡æœ‰å˜é‡æŒ‡å‘æŸä¸ªå¯¹è±¡æ—¶ï¼ˆæ‰€æœ‰å¼•ç”¨éƒ½è¢«åˆ é™¤ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±ä¼šè¢«é”€æ¯
2. åœ¨å¯¹è±¡é”€æ¯ä¹‹å‰ï¼Œä¼šè°ƒç”¨ææ„å‡½æ•°
3. ææ„å‡½æ•°ä¸æ˜¯é”€æ¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯é”€æ¯å¯¹è±¡åˆ›å»ºçš„ç›¸å…³èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥ç­‰

###### ä½¿ç”¨åœºåˆ/æœ€ä½³äº‹ä»¶

1. å¸Œæœ›åœ¨ç¨‹åºè¿˜æ²¡ç»“æŸå‰ï¼Œå°±é”€æ¯æŸäº›å®ä¾‹ï¼ˆæ˜¾æ€§åˆ é™¤ $cat1 = null;æˆ–æŒ‡å‘å…¶ä»–ï¼‰
2. åŠæ—¶é”€æ¯å¯¹è±¡åˆ›å»ºçš„èµ„æºï¼Œå¦‚æ•°æ®åº“è¿æ¥ç­‰

#### åƒåœ¾å›æ”¶â™»ï¸æœºåˆ¶

	1. å½“ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨ï¼ˆå˜é‡ï¼‰æŒ‡å‘å®ƒçš„æ—¶å€™ï¼Œå°±ä¼šæˆä¸ºä¸€ä¸ªåƒåœ¾å¯¹è±¡ï¼Œphpå°±ä¼šå¯åŠ¨åƒåœ¾å›æ”¶å™¨å°†å…¶é”€æ¯
 	2. å½“ç¨‹åºé€€å‡ºå‰ï¼Œphpä¹Ÿå°†å¯ç”¨åƒåœ¾å›æ”¶å™¨ï¼Œé”€æ¯å¯¹è±¡
 	3. php5.3è‡ªåå¯¹åƒåœ¾å›æ”¶ç®—æ³•ä¼˜åŒ–ï¼Œè§£å†³äº†**å¼•ç”¨ç¯**é—®é¢˜
 	4. å¯¹è±¡æ ‡è¯†ç¬¦åˆçš„å¼•ç”¨æ¬¡æ•°, æ¯ä¸ªå¯¹è±¡éƒ½ä¼šåˆ†é…ä¸€ä¸ªè®¡æ•°å™¨

### ç±»çš„é­”æœ¯æ–¹æ³• Magic methods

1. åœ¨æ»¡è¶³æŸç§æ¡ä»¶ä¸‹ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ï¼ˆä¸å¯æ‰‹åŠ¨è°ƒç”¨ï¼‰
2. éƒ½æ˜¯ä»¥â€”â€”å¼€å¤´çš„å‡½æ•°

####ä¸€è§ˆè¡¨

1. __construct
2. __destruct
3. __call  å½“å¯¹è±¡è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æˆ–ä¸å­˜åœ¨çš„æ–¹æ³•æ—¶ï¼Œ\_\_callä¼šè¢«è°ƒç”¨ã€‚
4. __callStatic
5. __set
6. __get
7. __isset
8. __unset
9. __sleep
10. __wakeup
11. __toString
12. __set_state
13. __clone

#### è®¿é—®ä¿®é¥°ç¬¦

å¯¹å±æ€§æˆ–æ–¹æ³•çš„è®¿é—®æ§åˆ¶ Access Control é€šè¿‡åœ¨å‰é¢æ·»åŠ å…³é”®å­— public protected private

|      | public | protected | private |
| ---- | ------ | --------- | ------- |
| ç±»å†… | âˆš      | âˆš         | âˆš       |
| ç±»å¤– | âˆš      | X         | X       |
| å­ç±» | âˆš      | âˆš         | X       |

åœ¨ç±»å¤–è®¿é—®privateå’Œprotectedå±æ€§ï¼Œéœ€è¦å®šä¸€ä¸ªpublic getAtt() ç»•è¡Œ

####  __get \_\_set 

å¯¹ç±»ä¸­ä¸å¯è®¿é—®/ä¸å­˜åœ¨çš„å±æ€§ è®¿é—®/è¯»å–æ—¶ __get ä¼šè¢«è‡ªåŠ¨è°ƒç”¨

å¯¹ç±»ä¸­ä¸å¯è®¿é—®/ä¸å­˜åœ¨çš„å±æ€§ è®¾ç½®/èµ‹å€¼æ—¶ __set ä¼šè¢«è‡ªåŠ¨è°ƒç”¨

åº”ç”¨ï¼š æ¾æ•£å‹çš„phpï¼šç»™ä¸å­˜åœ¨çš„å±æ€§èµ‹å€¼æ—¶ï¼Œä¼šè®¾ç½®æˆåŠŸ ï¼ä½¿ç”¨--setå¯ä»¥å‹å¥½æç¤ºï¼

####  \_\_isset \_\_unset

å¯¹ç±»ä¸­ä¸å¯è®¿é—®/ä¸å­˜åœ¨çš„å±æ€§ è¿›è¡Œ isset() / empty()æ—¶ __isset ä¼šè¢«è‡ªåŠ¨è°ƒç”¨

å¯¹ç±»ä¸­ä¸å¯è®¿é—®/ä¸å­˜åœ¨çš„å±æ€§ è¿›è¡Œ unset()æ—¶ __unset ä¼šè¢«è‡ªåŠ¨è°ƒç”¨

#### __call

```
class Cat{
	public function __call($method, $agrs){
		return $this->$agrs[0]($agrs[1],$agrs[2]);
	}
	public function getSum($n1,$n2){
		return $n1+$n2;
	}
}

$cat = new Cat;
$cat->play('getSum',1,2); //3
```

### __autoload ç±»çš„è‡ªåŠ¨/åŠ¨æ€åŠ è½½



å½“ä½¿ç”¨ä¸€ä¸ªæ²¡æœ‰å®šä¹‰è¿‡çš„ç±»æ—¶ï¼Œå°±ä¼š/æ‰ä¼šè‡ªåŠ¨è§¦å‘__autoloadå‡½æ•°

```
<?php
//init.php

function myAutoload($className){
	require "./Models/$className.php";
}

/* 

$classMap =['Cat'=>'../Models/Cat.class.php'];

function __autoload($className){
  global $classMap;
	require "./Class/$className.php";
}

*/
$cat = new Cat();

spl_autoload_register('myAutoload');

```

### ç±»çš„é™æ€å±æ€§

####é™æ€å˜é‡

æ‰€æœ‰å¯¹è±¡å…±äº«å…¬å…±çš„æ•°æ® ï¼Œå¯ä»¥åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ã€‚

åˆå§‹åŒ–åœ¨ç±»åŠ è½½æ—¶

####é™æ€å˜é‡å®šä¹‰

```
public static $counts =0;
```

####é™æ€å˜é‡å®šä¹‰è®¿é—®

â€‹	ç±»å†…è®¿é—® ï¼šèŒƒå›´è§£æç¬¦ self::**$**counts++;

â€‹	ç±»å¤–+ç±»å†… Cat::**$**counts; (éœ€è¦æ—¶public)

ä»»ä½•ä¸€ä¸ªå¯¹è±¡è®¿é—®æ—¶ï¼Œè·å–çš„æ—¶ç›¸åŒçš„å€¼

#### èŒƒå›´è§£æç¬¦ ::

 self:: 

####å¯¹è±¡è¿ç®—ç¬¦  ->

#### $thisä¸self::åŒºåˆ«

### ç±»çš„é™æ€æ–¹æ³•

é™æ€æ–¹æ³•ä¹Ÿå«ç±»æ–¹æ³•

#### å®šä¹‰

```
public static function cry(){

}
```

#### ä½¿ç”¨åœºæ™¯ ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰

- æ“ä½œé™æ€å˜é‡
  - é™æ€æ–¹æ³•ä¸­ä¸å¯ä»¥è®¿é—®/æ“ä½œ éé™æ€ å±æ€§/å˜é‡
- æ²¡æœ‰å¯¹è±¡å®ä¾‹çš„è¯ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨æ–¹æ³•

####è°ƒç”¨

- åœ¨ç±»çš„å¤–éƒ¨è°ƒç”¨é™æ€æ–¹æ³•, åˆ™å¿…éœ€ä¸ºpublic
  - Cat::cry();
  - $cat1->cry();//ä¸æ¨è
  - ~~$cat1::cry(); //æä¸æ¨è~~
- åœ¨ç±»çš„å†…éƒ¨è°ƒç”¨é™æ€æ–¹æ³•ï¼Œ
  - self::cry(); //æ¨è
  - Cat::cry(); //ä¸æ¨è
  - ~~$this->cry(); //æä¸æ¨è~~

#### ç»†èŠ‚



###  å°è£…

- æŠŠåŒä¸€ç±»é£Ÿç‰©çš„å±æ€§å’Œè¡Œä¸º åŒ…è£…èµ·æ¥

### ç»§æ‰¿
æ˜¯å•ç»§æ‰¿çš„ï¼Œä¸€ä¸ªç±»æœ€å¤šæœ‰ä¸€ä¸ªçˆ¶ç±»
ç®€æ´ï¼Œçº¯æ´æ€§
æ¥å£å¯ä»¥è¡¥å……æ— æ³•å¤šç»§æ‰¿çš„ç¼ºé™·ï¼

### é‡è½½overloading

#### __call å®ç°åŒåå‡½æ•°ä½†ä¸åŒå‚æ•°

####å±æ€§çš„é‡è½½(åŠ¨æ€æ·»åŠ å±æ€§) \_\_get() \_\_set()

```
class Cat{
	protected $pro_array = [];
	public function __set($pro_name,$val){
		$this->pro_array[$pro_name] = $val;
	}
	public function __get($pro_name){
	 return $this->pro_array[$pro_name];//if isset
	}
}
$cat = new Cat();
$cat->name = 'xiaohua';

```

### é‡å†™ override

å­ç±»é‡å†™çˆ¶ç±»public/protectedæ–¹æ³•æˆ–å±æ€§

é‡å†™è¦æ±‚ å‡½æ•°åå’Œå‚æ•°ä¸ªæ•° å®Œå…¨ä¸€è‡´

é‡å†™æ–¹æ³•å†… è®¿é—®çˆ¶ç±»çš„çš„é™æ€å±æ€§ parents::$totalï¼Œä½†è¿™ä¸ªé™æ€å±æ€§å¿…éœ€å¯ä»¥è¢«å­ç±»è®¿é—®ï¼ˆå³publicæˆ–protectedï¼‰

å­ç±»å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³• parents::__construct();

å­ç±»å¿…éœ€è¦å’Œçˆ¶ç±»çš„ ç±»å‹çº¦æŸ ä¿æŒä¸€è‡´

å­ç±»æ–¹æ³•ä¸èƒ½ç¼©å°çˆ¶ç±»è®¿é—®æƒé™ Access Level

### ç±»å‹çº¦æŸ

- å¯¹è±¡
- æ•°ç»„ array
- callable æ¯æ‰å‡½æ•°
- å¦‚æœé»˜è®¤å€¼nullï¼Œè°ƒç”¨æ—¶å¯ä»¥ä¸ºNULL
- ä¸èƒ½æ˜¯int string traits

### å±æ€§é‡å†™



### æŠ½è±¡ç±»ï¼ˆabstractï¼‰

#### ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æŠ½è±¡ç±»æŠ€æœ¯

- è§„èŒƒç±»çš„è®¾è®¡ï¼ˆæ¨¡ç³Šè®¾è®¡ä¸€ä¸ªç±»æ‹¥æœ‰çš„è¡Œä¸ºï¼‰
- å…³é”®è¯ï¼š abstract
- æŠ½è±¡ç±»abstractä¸å¯ä»¥å®ä¾‹åŒ–
- æŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³•ï¼Œä½†åŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»

#### æŠ½è±¡æ–¹æ³•

- æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰å‡½æ•°ä½“ï¼š abstract public function say();
- ç»§æ‰¿å­ç±»å¿…éœ€å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰abstractæ–¹æ³•ï¼Œé™¤éå®ƒä¹Ÿæ˜¯abstractç±»
- é‡å†™overwriteå­ç±»å®ç°çš„æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦ >= çˆ¶ç±»

#### æŠ½è±¡ç±»ä¸æŠ½è±¡æ–¹æ³•çš„å…³ç³»

- å¦‚æœä¸€ä¸ªç±»åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»

- æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«éæŠ½è±¡æ–¹æ³•

### æ¥å£ interface

- æ¥å£å°±æ˜¯ç”Ÿå‘½ä¸€ä¸ªæ–¹æ³•ï¼Œä¾›å…¶ä»–ç±»æ¥å®ç°
- è®¾è®¡æ€æƒ³ï¼š é«˜å†…èšä½è€¦åˆ
- æ¥å£å°±æ˜¯è§„èŒƒï¼Œæ˜¯æ›´åŠ æŠ½è±¡çš„æŠ½è±¡ç±»ï¼Œè§£å†³å¤šå±‚ç»§æ‰¿è€¦åˆé—®é¢˜

```interface iName{
interface iName{
  //å±æ€§ iName::A
  const A=90 
  //æ–¹æ³•
}

class iPhone extents Phone implements æ¥å£1ï¼Œæ¥å£2{
    //å¿…éœ€å®ç°æ¥å£1å’Œ2çš„æ‰€æœ‰æ–¹æ³•
} ```

//æ¥å£ä¹‹é—´å¯ä»¥å¤šç»§æ‰¿ 
interfact iUsb extents iUsb1 iUsb2{
}

```

####ä½¿ç”¨åœºåˆ

- å®šè§„èŒƒ
- å¤šä¸ªåŒçº§ç±»ï¼ŒåŒæ ·æ–¹æ³•wrtie()åˆæœ‰ä¸åŒçš„è¡Œä¸ºã€‚æ¯”å¦‚ï¼Œæœ‰çš„å†™æ•°æ®åº“ï¼Œæœ‰çš„å†™æ–‡ä»¶

#### ç»†èŠ‚

1. ä¸èƒ½å®ä¾‹
2. æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½ä¸èƒ½æœ‰æ–¹æ³•ä½“
3. å¯ä»¥å®ç°å¤šä¸ªæ¥å£
4. æ¥å£ä¸­çš„å±æ€§å¿…éœ€æ˜¯ publicå¸¸é‡
5. æ¥å£çš„æ–¹æ³•éƒ½å¿…éœ€æ˜¯public
6. æ¥å£ä¹‹é—´å¯ä»¥å¤šç»§æ‰¿ 

åœ¨ä¸æ‰“ç ´ç»§æ‰¿å…³ç³»çš„å‰æä¸‹æ‰©å……ç±»åŠŸèƒ½ï¼Œéå¸¸çµæ´»

### finalç±»
ä¸å¸Œæœ›ä»»ä½•ç±»ç»§æ‰¿çš„ç±»
ä¸å¯ä»¥è¦†ç›–é‡å†™çš„æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨finalä¿®é¥°
Final æ–¹æ³•å¯ä»¥è¢«ç»§æ‰¿ï¼Œä½†ä¸å¯ä»¥é‡å†™
finalç±»æ˜¯å¯ä»¥è¢«å®ä¾‹åŒ–çš„
final public sayï¼ˆï¼‰ï½›ï½
ä¸èƒ½ä¿®é¥°å±æ€§
### ç±»å¸¸é‡ const
ä¸å…è®¸æ”¹åŠ¨çš„ æ¯”å¦‚åœ†å‘¨ç‡ ä¸ç”¨$ç¬¦å·ï¼Œå¤§å†™ï¼Œå¿…é¡»èµ‹å€¼ï¼Œéƒ½å¿…é¡»æ˜¯public 

### å¤šæ€

phpå¤©ç”Ÿå°±æ˜¯å¤šæ€è¯­è¨€ï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿çˆ¶ç±»æˆ–å®ç°æ¥å£æ¥ä½“ç°å¤šæ€ã€‚

å¥½å¤„ï¼šä»£ç ç»´æŠ¤æˆ–æ‰©å±•

```
class Animal{
	public $name;
	function __construct($name){
		$this->name = $name;
	}
}

class Dog extends Animal{
	public function showInfo(){
		return $this->name;
	}
}

class Cat extends Animal{
	public function showInfo(){
		return $this->name;
	}
}

class Food{
	public $name;
	function __construct($name){
		$this->name = $name;
	}
}

class Fish extends Food{
	public function showInfo(){
		return $this->name;
	}
}

class Bone extends Food{
	public function showInfo(){
		return $this->name;
	}
}

class Master {
	public	$name;
	
	// è¿™é‡Œå®ç°äº†å¤šæ€ï¼ï¼ï¼ä½¿ç”¨ç±»å‹çº¦æŸ é™å®š ä¸€ä¸‹æ›´å¥½ï¼
	public function feed(Animal $animal, Food $food){
		echo PHP_EOL. $animal->showInfo();
		echo 'å–œæ¬¢åƒ';
		echo PHP_EOL. $food->showInfo();
	}
}

$master = new Master('xiaohong');
$cat = new Cat('å°èŠ±çŒ«');
$fish = new Fish('å°é±¼é±¼');
$master->feed($cat, $fish);

$dog = new Dog('å¤§é»„');
$bone = new Fish('å¤§æ£’éª¨ğŸ¦´');
$master->feed($dog, $bone);

```

### å¯¹è±¡çš„éå†

- å¯¹è±¡éå†åªèƒ½éå†å¯¹è±¡çš„å±æ€§å€¼
- åœ¨ç±»å¤–éå†æ—¶ï¼Œåªèƒ½éå†åˆ°publicå±æ€§
- å¦‚æœè¦éå†æ‰€æœ‰å±æ€§ï¼Œéœ€è¦æˆå‘˜æ–¹æ³•åœ¨ å®ä¾‹é‡Œ/ç±»é‡Œ éå†

```
public class Dog{
	public $name='xiaomao';
	private $age=1;
	protected $color;
	//å†…éƒ¨å¯ä»¥è®¿é—®åˆ°æ‰€æœ‰å±æ€§
	function getVars(){
		foreach($this as $key=>$val){
			echo PHP_EOL."$key=>$val";
		}
	}
}

$dog1 = new Dog();
//å¤–éƒ¨éå†åˆ°publicå±æ€§
foreach($dog as $key=>$val){
	echo PHP_EOL."$key=>$val";
}

```



#### å†…ç½®æ ‡å‡†ç±» stdClass

- phpä¸­æœ‰ä¸€ä¸ªç±» stdClassï¼Œä¸éœ€è¦åˆ›å»ºå°±å¯ä»¥ä½¿ç”¨
- é€šå¸¸ä»¥å¯¹è±¡çš„æ–¹å¼ç®¡ç†æ•°æ®

```
$person = new stdClass();
var_dump($person);
$person->name = 'çŒªå…«æˆ’';
var_dump($persion);
```



#### å…¶ä»–æ•°æ®ç±»å‹ è½¬æ¢æˆå¯¹è±¡

```
$heros = ['no1'=>'å®‹æ±Ÿ'ï¼Œ'no2'=>'å°å´'];
//å½“æˆ‘ä»¬æŠŠä¸€ä¸ªæ•°ç»„è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡åï¼Œ
//å®ƒæˆä¸ºä¸€ä¸ªstdClasså¯¹è±¡å®ä¾‹
//å¦‚æœæ˜¯ä¸€ä¸ªå…³è”æ•°ç»„ï¼Œæ•°ç»„çš„keyç¼–ç¨‹å±æ€§å
//å¦‚æœæ˜¯ä¸€ä¸ªç´¢å¼•æ•°ç»„ï¼Ÿï¼Ÿï¼Ÿ
$heros = (object) $heros;


$age=90;
$age = (object) $age;
```

### serialize un-serialize

- å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–

- åºåˆ—åŒ– ä¿å­˜ä¸ºå­—ç¬¦ä¸² \$str = serialize($obj1);
- ååºåˆ—åŒ– æŠŠå­—ç¬¦ä¸²è¿˜åŸä¸ºåŸæ¥çš„å¯¹è±¡ï¼Œéœ€è¦å¼•å…¥ç±»çš„å®šä¹‰
  - $obj1 = unserialize(\$str);

### trait

````
trait Abc{
	function sum($n1,$n2){
		return $n1+$n2;
	}
	function getMax($arr){
		return max($arr);
	}
}

class Cde{
	use Abc;
}
````

- ä»£ç å‡½æ•°çº§åˆ«å¤ç”¨
- traitä¸å¯ä»¥å®ä¾‹åŒ–
- ä¼˜å…ˆçº§ä¸ºæœ€ä½ï¼Œå¯ä»¥è¦†ç›–



### åå°„ ReflectionClass

```
class IndexAction{
	public function index(){
		echo 'Index';
	}
	public function test(){
		echo PHP_EOL.__CLASS__.__FUNCTION__.__LINE__;
	}
	
	public function _before_index(){
		echo PHP_EOL.__CLASS__.__FUNCTION__.__LINE__;
	}
	
	public function _after_index(){
		echo PHP_EOL.__CLASS__.__FUNCTION__.__LINE__;
	}
}
//
var_dump(Reflection::export('IndexAction'));

//éœ€æ±‚æ˜¯ IndexActionä¸­çš„æ–¹æ³•å’Œè®¿é—®æ§åˆ¶ç¬¦æ˜¯ä¸ç¡®å®šçš„ã€‚å¦‚æœæ˜¯publicï¼Œå¯ä»¥æ‰§è¡Œ
//å¦‚æœå­˜åœ¨before/afteræ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯publicï¼Œåˆ™æ‰§è¡Œ

$reflector = new ReflectionClass('IndexAction');
if($reflector->hasMethod('index')){
	echo 'has-index';
	$reflectorIndex = $reflector->getMethod('index');
	if($reflectorIndex->isPublic()){
		echo 'index is public';
		//before
		if($reflector->hasMethod('_before_index')){
			$reflectorBefore = $reflector->getMethod('_before_index');
			if($reflectorBefore->isPublic()){
				$reflectorBefore->invoke(new $reflector->newInstance());
			}
		}
		//index
		
		//after
	}
}else{
	echo 'no-index';
}
```

